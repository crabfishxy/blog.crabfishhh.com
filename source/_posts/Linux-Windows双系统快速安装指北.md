---
title: Linux+Windows双系统快速安装指北
date: 2018-03-13 02:33:18
tags: 
- 系统
categories:
- 技术备忘
comments: true
description: 从准备工作开始到正常开机进入系统大约耗时2小时
---
## 前言

最近感觉需要用到Linux的地方比较多，并且迟早得习惯于在Linux环境下工作的，所以决定不再使用虚拟机，直接装个双系统，然后争取能长期在Linux环境中工作学习(顺便能抛弃游戏)。其实去年差不多也是这个时候是装过Ubuntu16.04的，当时在分区的时候好像遇到过一些不明所以的问题，后来也不知道怎么解决的，磕磕绊绊的算装好了。结果最后都没用过几天，毕竟在Windows环境下已经用了十多年了，习惯的力量还是最强大的。

## 计算机环境

我本身的系统是Windows10教育版，然后有两个硬盘，一个是120G的固态，一个是1T的机械硬盘。网上有关分区的说法有很多，看的我眼花，最后也没有多想，拍拍脑袋做出了分区的规划：
* /boot分区500M，放在SSD
* /分区20G，放在SSD
* /swap分区8G(与内存相同)，放在HDD，其实我更加倾向于不需要交换分区，但机械硬盘比较充足，还是分了8G，反正SSD的空间是不可能给的。
* /home分区70G

这就是我的分区规划，仅供参考，根目录还是得放在SSD里面的，应该能对日常使用提速不少。

Linux发行版我最后选择了Mint，因为看了下界面比较合我心意啦，而且还是基于Ubuntu 16.04的，网上也有说法对于驱动的安装更加友好。

## 安装

首先就是得制作系统盘，这里需要用的是ultraiso，也就是软碟通,制作方法这里不详细介绍，简述一下流程：
1. 打开镜像文件，即选择我们之前下载的Mint的iso文件

2. 然后选择写入硬盘映像

3. 点击“便捷启动”，然后再弹出的菜单中依次选择“写入新的驱动器引导扇区”，再选择“Syslinux”，这应该是比较重要的一步。

4. 写入，等待。

然后得给Mint腾出空间，理论上来说可以直接使用Win10自带的磁盘管理工具来压缩卷，但在SSD可用容量还有50G的时候，它连压10G出来都会提示可用空间不足。。。所以我还是使用了第三方工具DiskGenius，压了20G出来给根目录。然后从G盘抽了70G，F盘抽了8G，至此，准备工作算是完成了。

然后直接重启，进BIOS，我是在电脑出现战神LOGO时按F2即可。进入后设置启动项为U盘，然后保存并重启。之后就进入安装界面啦。这里其实没有什么可多说的，直接按着流程走，记住在询问安装选项时选择“其他安装设置”，然后按着规划好的分区来分配之前压缩的磁盘空间即可。**比较关键的是选择启动引导的时候要选择之前分配给/boot的那500M分区**，重启。在BIOS重新设置从SSD启动（根据自己系统实际安装位置决定）。

## 进入

因为还没有设置引导项，所以还是正常地从Win10进入，然后只需安装EasyBCD或者其他类似的能够设置开机引导项的软件，新建引导条目，选Linux，然后选择之前分配的boot分区即可。再次重启，就可以在开机时选择Mint啦！

如果照着这个流程走的话全程大约一个小时，可以说是非常快了呢！

## Mint配置

相比安装，在安装完成后对系统的配置才更加耗时耗力。我这里选择较为关键的几个点来说说：

### 更换软件源

本来打算用zju自己的源，结果没找到？最后用的是中科大的源。。。反正速度肯定还是不差的，国内几个大学的源都很快。

### 科学上网

这个事情优先级还是很高的，毕竟很多问题baidu上搜不到可能得依靠google搜索在国外论坛找到答案。

#### 安装ssr

我是使用ssr来科学上网，这里也简略讲一下流程，先安装ssr:

```
wget http://www.djangoz.com/ssr
sudo mv ssr /usr/local/bin
sudo chmod 766 /usr/local/bin/ssr
ssr install
ssr config
```
这里可能得先装好git，在install的时候会用到。至于config怎么配置，不是这篇文章讨论的范畴。

config结束后会自动启动，如果配置没问题应该就自动会在后台运行了。

#### 安装chrome

其实火狐也是一个很好的选择，但个人还是习惯使用chrome。
```
#添加下载源(现在自然不可能用google官方的源)
sudo wget https://repo.fdzh.org/chrome/google-chrome.list -P /etc/apt/sources.list.d/
#添加公钥
wget -q -O - https://dl.google.com/linux/linux_signing_key.pub  | sudo apt-key add -
#更新软件源
sudo apt-get update
#开始下载安装
sudo apt-get install google-chrome-stable
#运行
/usr/bin/google-chrome-stable
```

我在运行的时候还遇到了错误，nss版本不够（大概这个意思），只要更新一下就好了

```
sudo apt-get install --reinstall libnss3
```

然后配置SwitchyOmega，开开心心上网吧。至于终端也需要科学上网的话还需要privoxy，这里不赘述了，网上有教程。

### 换字体

这个是比较恶心的一点，据说是因为安装时如果联网Mint会给你下载楷体(具体是什么类型的楷体我也不知道)作为系统字体，难看的一比，在系统的字体修改之后菜单栏等地方还是没变，不知道什么情况，最后直接卸载了这个字体才算搞定。。。

### 装驱动

同样比较复杂的东西，Mint自带的驱动管理就可以下载英伟达的闭源驱动，安装完后记得在重启前禁用原来的nouveau开源驱动，否则启动就会桌面崩溃，进入备用桌面。。。

所以得先把nouveau加到黑名单里去，编辑/etc/modprobe.d/blacklist-modem.conf ，在文件后面加入：
```
blacklist nouveau option nouveau modeset=0
```

然后重启就好了，能在右下角看到英伟达的绿眼睛了。

## 结束

基本这么走下来值得注意的点就这么多，剩下的什么美化桌面，java环境，娱乐啥的都很方便就可以弄好了，Mint和Windows的桌面GUI相似度非常高，Jetbrains大礼包也都支持Windows平台。

顺带一提，linux上的steam真是惊到我了，本人28款游戏有16款是支持的，已经过半了，其中还有CS:GO，DOTA2这种大作，steam牛逼，G胖牛B！只是如果想传火还是得回Windows去。。。
